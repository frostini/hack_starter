<div class="row">
  <div class="col-xs-12">
    <div class="white-box">
             <%=form_tag("/dwellings", method: "get", id: "search_form") do%>
              <!-- <div class="col-xs-12"> -->
                <%= label_tag(:address, "Zip Code or Address:", class: 'd-b') %>
                <%= text_field_tag(:address, @search_address || 94117, :required => true) %>
              <!-- </div> -->
              <!-- <div class="col-xs-12"> -->
                <%= label_tag(:distance, "Distance from address", class: 'd-b') %>
                <%= number_field_tag(:distance, :required => true) %>
              <!-- </div> -->
              <!-- <div class="col-xs-12"> -->

<%=
select_tag "bedrooms", "<option value='1'>1</option><option value='2'>2</option><option value='3'>3</option>".html_safe, class: 'form_input', id: 'unique_id'%>

<%=
select_tag "bathrooms", "<option value='1'>1</option><option value='2'>2</option><option value='3'>3</option>".html_safe, class: 'form_input', id: 'unique_id'%>
                <%= submit_tag("Find", class: 'btn btn-warning', id: 'distance_slider') %>

             <%end%>
    </div>
  </div>
</div>
<div class="row">
<div class="col-xs-12">
<div class="white-box">
<form class="form-horizontal form-material">
<div class="form-group">
<label class="col-md-12">City or Zip Code</label>
<div class="col-md-12">
<input type="text" placeholder="San Francisco or 94115" class="form-control form-control-line">
</div>
</div>
<div class="form-group">
<label class="col-md-12">Distance from location</label>
<div class="col-md-12">
<input type="text" placeholder="3 miles" class="form-control form-control-line">
</div>
</div>
<div class="form-group">
<label class="col-sm-12">Housing Style</label>
<div class="col-sm-12">
<select class="form-control form-control-line">
<option>London</option>
<option>India</option>
<option>Usa</option>
<option>Canada</option>
<option>Thailand</option>
</select>
</div>
</div>
<div class="form-group">
<label class="col-sm-12">Number of Rooms</label>
<div class="col-sm-12">
<select class="form-control form-control-line">
<option>London</option>
<option>India</option>
<option>Usa</option>
<option>Canada</option>
<option>Thailand</option>
</select>
</div>
</div>
<div class="form-group">
<label class="col-sm-12">Number of Bathrooms</label>
<div class="col-sm-12">
<select class="form-control form-control-line">
<option>London</option>
<option>India</option>
<option>Usa</option>
<option>Canada</option>
<option>Thailand</option>
</select>
</div>
</div>
<div class="form-group">
<div class="col-sm-12">
<button class="btn btn-success">Update Profile</button>
</div>
</div>
</form>
</div>
</div>
</div>

      <div class="row">
        <div class="col-md-6 col-md-push-6">
          <div class="white-box">

  <div style="height:100%; width: 100%;"> 
    <!-- <div id="map-canvas"></div> -->
            <div id="map" style="width:100%;height:300px;"></div>
  </div>
          </div>
        </div>

        <div class="col-md-6 col-md-pull-6">
          <div class="white-box">
            
            <% @dwellings.each do |address|%>
              <div class="media">
                <div class="media-left">
                  <%= image_tag("pawandeep.jpg", class: "media-object", width: "64", height: "64")%> 
                </div>
                <div class="media-body">
                  <h4 class="media-heading">
                    <%=address.addressable.try(:display_name)%>
                  </h4>
              <%=address.inspect%>
                </div>
                <div class="media-right">
                  <%= image_tag("pawandeep.jpg", class: "media-object", width: "64", height: "64")%> 
                </div>
              </div>
            <%end%>
            <div class="media">
              <h1>hello</h1>
<div class="side-bar-container" id="listingsSideBarContainer">
  <div id="marker_list" class="w-80-p c-w-m">
    <div class="accordion-group" id="list-details">
    </div>
  </div>
</div>
            </div>
          </div>
        </div>

      </div>
      <!-- /.row -->

<% content_for :javascripts do %>


<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAL95_FQF-8xeI7BSxU_YzS5wSW5aAhXuE"></script>

<script>
var APP = {};
APP.mapOptions = {
  center: new google.maps.LatLng(37.551138,-122.1204182),
  zoom: 9,
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  zoomControl: true, 
  mapTypeControl: false,
  scrollwheel: false,
  zoomControlOptions: {position: google.maps.ControlPosition.LEFT_CENTER}
};
APP.infoWindows = [];
APP.setMarkers = function(map) {
  var baseUrl = "/dwellings/"

for (i = 0; i < gon.mapData.length; i++) {  
  var lat = gon.mapData[i][0]["latitude"];
  var long = gon.mapData[i][0]["longitude"];
  var title = gon.mapData[i][1]["display_name"];
  var dwelling_id= gon.mapData[i][1]["id"];

  var latlngset = new google.maps.LatLng(lat, long);

  APP.marker = new google.maps.Marker({  
                    map: map, 
                    title: title,
                    position: latlngset
                  });
var infoWindow = new google.maps.InfoWindow();
var content = "<a href="+baseUrl+dwelling_id+">"+title+"</a>";

  google.maps.event.addListener(APP.marker,'click', (function(marker,content,infowindow){ 
      return function() {
          /* close the previous info-window */
         APP.closeInfoWindows();
         // collapseListItemPane();
         
         infowindow.setContent(content);
         infowindow.open(map,marker);
         listItemPane = $('#marker-'+marker.id);
         $(listItemPane).collapse('show');

          /* keep the handle, in order to close it on next click event */
          APP.infoWindows[0]=infowindow;
      };
  })(APP.marker,content,infoWindow)); 


};
};
APP.closeInfoWindows = function (){
       if(APP.infoWindows.length > 0) {
          /* detach the info-window from the marker ... undocumented in the API docs */
          APP.infoWindows[0].set("marker", null);
          /* and close it */
          APP.infoWindows[0].close();
          /* blank the array */
          APP.infoWindows.length = 0;
       }
    }

APP.initMap = function() {

  APP.map = new google.maps.Map(document.getElementById('map'), APP.mapOptions);
  APP.setMarkers(APP.map);

}




APP.initMap();

    </script>



<%end%>